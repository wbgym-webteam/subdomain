{% extends 'base.html' %}

{% block title %}
Ranking for GoG
{% endblock %}

{% block content %}
    <div class="dashboard">
        <!-- Main Leaderboard for A Teams -->
        <h1 class="leaderboard-title">Gesamtrangliste - A Teams</h1>
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th class="leaderboard-number">Nummer</th>
                    <th class="leaderboard-name">Team Name</th>
                    <th class="leaderboard-points">Gesamtpunkte</th>
                </tr>
            </thead>
            <tbody>
                {% for team in a_teams %}
                <tr>
                    <td class="leaderboard-number">{{ team.team_number }}</td>
                    <td class="leaderboard-name">{{ team.team_name }}</td>
                    <td class="leaderboard-points">{{ team.total_final_points|default("Keine Punkte") }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="3" class="leaderboard-points">Keine Daten verfügbar</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="section-divider"></div>

        <!-- Main Leaderboard for B Teams -->
        <h1 class="leaderboard-title">Gesamtrangliste - B Teams</h1>
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th class="leaderboard-number">Nummer</th>
                    <th class="leaderboard-name">Team Name</th>
                    <th class="leaderboard-points">Gesamtpunkte</th>
                </tr>
            </thead>
            <tbody>
                {% for team in b_teams %}
                <tr>
                    <td class="leaderboard-number">{{ team.team_number }}</td>
                    <td class="leaderboard-name">{{ team.team_name }}</td>
                    <td class="leaderboard-points">{{ team.total_final_points|default("Keine Punkte") }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="3" class="leaderboard-points">Keine Daten verfügbar</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="section-divider"></div>

        <!-- Individual Game Leaderboards for A Teams -->
        <h1 class="leaderboard-title">Spielranglisten - A Teams</h1>
        {% for game, ranking in game_leaderboards.A_Teams %}
        <h2 class="leaderboard-title">Rangliste für {{ game.name }} ({{ game.get_scoring_preference_display }})</h2>
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th class="leaderboard-number">Nummer</th>
                    <th class="leaderboard-name">Team Name</th>
                    <th class="leaderboard-points">Punkte/Zeit</th>
                    <th class="leaderboard-rank">Platz</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in ranking %}
                <tr>
                    <td class="leaderboard-number">{{ entry.team.team_number }}</td>
                    <td class="leaderboard-name">{{ entry.team.team_name }}</td>
                    <td class="leaderboard-points">
                        {% if game.dependency_type == "time" %}
                            {{ entry.points }} Sekunden
                        {% else %}
                            {{ entry.points }} Punkte
                        {% endif %}
                    </td>
                    <td class="leaderboard-rank">{{ forloop.counter }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" class="leaderboard-points">Keine Daten verfügbar</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endfor %}

        <div class="section-divider"></div>

        <!-- Individual Game Leaderboards for B Teams -->
        <h1 class="leaderboard-title">Spielranglisten - B Teams</h1>
        {% for game, ranking in game_leaderboards.B_Teams %}
        <h2 class="leaderboard-title">Rangliste für {{ game.name }} ({{ game.get_scoring_preference_display }})</h2>
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th class="leaderboard-number">Nummer</th>
                    <th class="leaderboard-name">Team Name</th>
                    <th class="leaderboard-points">Punkte/Zeit</th>
                    <th class="leaderboard-rank">Platz</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in ranking %}
                <tr>
                    <td class="leaderboard-number">{{ entry.team.team_number }}</td>
                    <td class="leaderboard-name">{{ entry.team.team_name }}</td>
                    <td class="leaderboard-points">
                        {% if game.dependency_type == "time" %}
                            {{ entry.points }} Sekunden
                        {% else %}
                            {{ entry.points }} Punkte
                        {% endif %}
                    </td>
                    <td class="leaderboard-rank">{{ forloop.counter }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" class="leaderboard-points">Keine Daten verfügbar</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endfor %}
    </div>
{% endblock %}